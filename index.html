<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Shopee Preview</title>
</head>
<body>
  <h2>Xem trước sản phẩm Shopee</h2>
  <input type="text" id="input" placeholder="Dán link Shopee..." style="width:300px">
  <button onclick="getShopee()">Lấy thông tin</button>

  <div id="result" style="margin-top:20px;"></div>

  <script>
    async function getShopee() {
      const url = document.getElementById('input').value.trim();
      if (!url.startsWith("http")) return alert("Link không hợp lệ!");

      const encoded = encodeURIComponent(url);
      const res = await fetch(`/api/shopee?url=${encoded}`);
      const data = await res.json();

      if (data.error) {
        document.getElementById('result').innerText = "❌ Không lấy được dữ fsd liệu!";
        return;
      }

      document.getElementById('result').innerHTML = `
        <img src="${data.image}" width="150"><br>
        <h3>${data.title}</h3>
      `;
    }
  </script>
</body>
</html>
